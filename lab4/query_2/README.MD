# Анализ запроса №2

## Запрос на языке SQL

```sql
select Н_ЛЮДИ.ИД, Н_ОБУЧЕНИЯ.НЗК, Н_УЧЕНИКИ.ИД
from Н_УЧЕНИКИ
right join Н_ОБУЧЕНИЯ on Н_УЧЕНИКИ.ЧЛВК_ИД = Н_ОБУЧЕНИЯ.ЧЛВК_ИД
right join Н_ЛЮДИ on Н_УЧЕНИКИ.ЧЛВК_ИД = Н_ЛЮДИ.ИД
where (
    Н_ЛЮДИ.ОТЧЕСТВО > 'Георгиевич'
    and
    Н_ОБУЧЕНИЯ.ЧЛВК_ИД < 163484
);

```

## Индексы

1) Hash

Данный индекс может быть полезен исключительно для ускорения JOIN'ов:

- Н_УЧЕНИКИ(ЧЛВК_ИД)
- Н_ОБУЧЕНИЯ(ЧЛВК_ИД) - для PK, так как PK - составной

2) B-tree

Бинарное дерево же будет полезно в тех же случаях, что и hash, но также в выражениях WHERE:

- Н_УЧЕНИКИ(ЧЛВК_ИД)
- Н_ЛЮДИ(ОТЧЕСТВО)
- Н_ОБУЧЕНИЯ(ЧЛВК_ИД)

3) GiST

Избыточен

4) SP-GiST

Избыточен

5) GIN

Избыточен

6) BRIN

По аналогии с первым запросом, натуральная корреляция наблюдается на колонках-внешних ключах, а также в случаях сравнения:

- Н_УЧЕНИКИ(ЧЛВК_ИД)
- Н_ОБУЧЕНИЯ(ЧЛВК_ИД)

## Планы выполнения запроса

### До добавления индексов

### После добавления индексов

## Вывод команды `EXPLAIN ANALYZE`

![explain_analyze_q2](/lab4/query_2/img/explain_analyze_q2.png)
